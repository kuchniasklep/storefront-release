import{r as t,h as s,g as i}from"./index-f6e5b397.js";import{V as n}from"./validate-cd7ce36d.js";const o=class{constructor(s){t(this,s),this.product=0}async requestHandler(t){if(t.preventDefault(),!(await n(this.root.querySelector("form"))))return;this.dialog.showLoading();const s=new FormData(t.target);s.append("product",this.product.toString()),await fetch(this.api,{body:s,method:"post"}).then((async t=>t.json())).then((async t=>{if(!("status"in t&&"heading"in t&&"paragraph"in t))throw new Error(this.errorParagraph);"success"==t.status?this.dialog.showSuccess(t.heading,t.paragraph):this.dialog.showFailure(t.heading,t.paragraph)})).catch((async t=>{let s="";window.navigator.onLine?""!=t.message&&(s=t.message):s="Brak internetu.",console.log(t.message),this.dialog.showFailure(this.errorHeading,s)}))}async show(){this.dialog.show()}componentDidLoad(){this.dialog=this.root.querySelector("ks-dialog")}render(){return s("ks-dialog",null,s("form",{onSubmit:t=>this.requestHandler(t)},s("fieldset",null,s("div",{class:"info"},s("h3",null,this.heading),s("p",null,this.paragraph)),s("ks-input-text",{email:!0,name:"email",required:!0,nomessage:!0,placeholder:"E-mail",icon:"mail"}),s("ks-input-check",{checked:!0,name:"backorders",nomessage:!0,label:this.backorders}),s("ks-input-check",{name:"zgoda",required:!0,nomessage:!0,label:this.agreement}),s("ks-button",{submit:!0,name:"POWIADOM MNIE"}))))}get root(){return i(this)}};o.style="ks-product-notify{display:block}ks-product-notify fieldset{border:none;margin:0;padding:0}ks-product-notify .info{text-align:center;margin-bottom:40px}ks-product-notify h3{font-family:var(--font-emphasis);font-size:20px;font-weight:700}ks-product-notify ks-input-check{margin-bottom:5px}ks-product-notify ks-button{margin-top:20px}";export{o as ks_product_notify}
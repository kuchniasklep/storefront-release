import{r as t,h as i}from"./p-f748ea6f.js";const e=class{constructor(i){t(this,i),this.apiData="",this.lightUp=!1,this.data=new Array,this.loading=!1,this.message=""}async FetchData(){var t=new Headers;t.append("pragma","no-cache"),t.append("cache-control","no-cache"),this.loading=!0,this.message="",await fetch(this.api+this.apiData,{method:"GET",headers:t,credentials:"same-origin"}).then((t=>{if(!t.ok)throw t.status;return t.json()})).then((t=>{this.data=t})).catch((t=>{let i=t;Number.isInteger(t)?i="Błąd połączenia - "+t:navigator.onLine||(i="Brak połączenia z internetem. "),this.message=i})),this.loading=!1}async Validate(){this.lightUp=!1}async IsValid(){return!this.loading&&""==this.message}componentWillLoad(){this.FetchData()}Decode(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent}render(){return i("div",{class:"uk-position-relative"},i("ks-input-select",{name:this.name,label:this.label,error:""!=this.message,"light-up":this.lightUp},this.data.map((t=>i("option",{selected:this.selectedId==t.value,value:t.value},this.Decode(t.name))))),this.loading?i("div",{class:"uk-position-absolute uk-animation-fade",style:{top:"20px",left:"0px",width:"100%",height:"50px",backgroundColor:"rgba(255, 255, 255, 0.7)"}},i("div",{"uk-spinner":!0,class:"uk-position-center"})):null,""!=this.message?i("div",{class:"uk-position-absolute",style:{top:"20px",left:"0px",width:"100%",height:"50px",backgroundColor:"rgba(255, 255, 255)"}},i("p",{class:"uk-position-center uk-text-danger"},this.message," ",i("a",{onClick:()=>this.FetchData()},"Odśwież"))):null)}static get watchers(){return{apiData:["FetchData"]}}};export{e as ks_input_select_dynamic}
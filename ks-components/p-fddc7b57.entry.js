import{r as t,h as s,g as i}from"./p-cb802b7f.js";import"./p-83f217d4.js";import{T as e}from"./p-5a700d36.js";const o=class{constructor(s){t(this,s),this.shippingTimeApi=""}watchHandler(t,s){void 0!==this.data&&void 0!==t&&void 0!==s&&(s.currentPrice!=t.currentPrice&&(this.data.currentPrice=this.data.currentPrice.replace(".",",")+" zł"),s.previousPrice!=t.previousPrice&&(this.data.previousPrice=this.data.previousPrice.replace(".",",")+" zł"))}updateData(t){this.data=Object.assign(Object.assign({},this.data),t)}updateImage(t){this.data.images[0]=t,this.handleResize()}updateShippingTime(t,s){if(""!=this.shippingTimeApi){const i=new Headers;i.append("pragma","no-cache"),i.append("cache-control","no-cache");let e=new FormData;e.append("id",t),e.append("count",s.toString()),fetch(this.shippingTimeApi,{method:"POST",body:e,headers:i,credentials:"same-origin"}).then(t=>{if(t.ok)return t.json()}).then(t=>{this.data=Object.assign(Object.assign({},this.data),{shippingTime:t.shippingTime})}).catch(()=>{})}}componentWillLoad(){const t=document.getElementById(this.dataId);this.data=JSON.parse(t.innerHTML),this.data.update=t=>this.updateData(t),this.data.updateImage=t=>this.updateImage(t),this.data.updateShippingTime=(t,s)=>this.updateShippingTime(t,s)}handleResize(){this.mobile=!(window.innerWidth>960)}componentDidLoad(){this.handleResize()}render(){return s(e.Provider,{state:this.data},s("ks-product-schema",null),s("ks-card",{padding:!0},s("div",{class:"uk-child-width-1-2@m uk-grid-collapse","uk-grid":!0},this.mobile?s("ks-product-title",null):null,s("ks-product-images",null),s("div",null,this.mobile?null:s("ks-product-title",null),s("ks-product-price",null),s("slot",{name:"below-price"}),s("ks-product-trait",null),s("slot",null),s("ks-product-buttons",null),s("ks-product-codes",null)))))}get root(){return i(this)}static get watchers(){return{data:["watchHandler"]}}};export{o as ks_product_info}
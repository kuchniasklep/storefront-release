import{r as t,h as a,g as e}from"./p-f748ea6f.js";const o=class{constructor(a){t(this,a),this.api="",this.action="",this.passwordMessage="",this.passwordRecovery=""}componentDidLoad(){this.root.style.display="block"}render(){return[a("div",{class:"uk-padding",style:{backgroundColor:"#f2f2f5"}},a("div",{class:"uk-text-center",style:{maxWidth:"500px",margin:"auto"}},a("p",{class:"ks-text-decorated uk-text-bold",style:{fontSize:"28px"}},"POSIADASZ KONTO?"),a("form",{onSubmit:t=>this.Submit(t)},a("slot",null),a("button",{type:"submit",class:"uk-button uk-button-secondary ks-text-decorated uk-text-bold uk-width-1-1 uk-margin-bottom",style:{fontSize:"20px",padding:"6px"}},"ZALOGUJ SIĘ")),a("a",{href:this.passwordRecovery},"Nie pamiętam hasła")))]}async Submit(t){t.preventDefault();const a=this.root.querySelector("form"),e=a.querySelector("ks-input-dynamic"),o=a.querySelector("ks-input-text[password]");if(await e.Validate(),await o.Validate(),await e.IsValid()&&await o.IsValid()){var s=new Headers;s.append("pragma","no-cache"),s.append("cache-control","no-cache");const t=new FormData(a),e=await fetch(this.api,{body:t,method:"POST",headers:s,credentials:"same-origin"}).then((t=>t.text()));"false"==e?o.message=this.passwordMessage:"true"==e&&this.LoginPrompt(t)}}async LoginPrompt(t){var a=new Headers;a.append("pragma","no-cache"),a.append("cache-control","no-cache");const e=new FormData;e.set("data",`email=${encodeURIComponent(t.get("email").toString())}&haslo=${encodeURIComponent(t.get("haslo").toString())}`);const o=await fetch(this.action,{body:e,method:"POST",headers:a,credentials:"same-origin"}).then((t=>t.text())),s=document.createElement("ks-order-login-prompt");-1!=o.search("koszyk.html")&&s.setAttribute("message","Do koszyka zostały dodane wcześniej zapisane produkty."),document.body.appendChild(s)}get root(){return e(this)}};export{o as ks_order_login}
var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var o=Array(t),a=0,e=0;e<r;e++)for(var i=arguments[e],n=0,s=i.length;n<s;n++,a++)o[a]=i[n];return o};System.register(["./index-7a244351.system.js","./index-688a8f79.system.js","./cart-store-7d3c60ae.system.js"],(function(t){"use strict";var e,r,o,a,i;return{setters:[function(t){e=t.r;r=t.c;o=t.h;a=t.g},function(){},function(t){i=t.s}],execute:function(){var n="ks-cart-easyprotect-dialog{display:block}ks-cart-easyprotect-dialog .content{background-color:var(--card-background);-webkit-box-shadow:var(--big-shadow);box-shadow:var(--big-shadow);color:var(--card-text-color);position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;max-width:720px;width:100%}ks-cart-easyprotect-dialog .content h2{font-size:24px;font-weight:700;text-align:center;margin-top:30px}ks-cart-easyprotect-dialog .content p{text-align:center;margin:10px 10px 20px 10px}ks-cart-easyprotect-dialog .content>.products .items{padding:10px 20px;max-height:320px;overflow-y:auto}ks-cart-easyprotect-dialog .content>.warranty .items{padding:0 20px 0 20px;max-height:270px;overflow-y:auto}ks-cart-easyprotect-dialog .content.hidden{display:none}ks-cart-easyprotect-dialog .content.hide{opacity:0;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease}ks-cart-easyprotect-dialog ks-button{z-index:20;position:relative;margin-top:20px;-webkit-box-shadow:0 2px 20px rgba(255, 255, 255, 0.3);box-shadow:0 2px 20px rgba(255, 255, 255, 0.3);border-top:#8057c1 1px solid}ks-cart-easyprotect-dialog ks-button[disabled]{border-top:#bebebe 1px solid}ks-cart-easyprotect-dialog ks-button button{background-color:var(--easyprotect-color);border-color:var(--easyprotect-color)}ks-cart-easyprotect-dialog ks-button button:hover{background-color:var(--easyprotect-color-hover) !important;border-color:var(--easyprotect-color-hover) !important}ks-cart-easyprotect-dialog ks-button button:active{background-color:var(--easyprotect-color-active) !important;border-color:var(--easyprotect-color-active) !important}ks-cart-easyprotect-dialog ks-button[disabled] button{background-color:#e2e2e2 !important;border-color:#e2e2e2 !important;color:#3d3d3d !important;cursor:auto}ks-cart-easyprotect-dialog ks-overlay .content{-webkit-animation:0.4s vertical-swipe-out 1;animation:0.4s vertical-swipe-out 1}ks-cart-easyprotect-dialog ks-overlay.active .content{-webkit-animation:0.4s vertical-swipe-in 1;animation:0.4s vertical-swipe-in 1}@media (max-width: 720px){ks-cart-easyprotect-dialog .content{height:100%}ks-cart-easyprotect-dialog .content>.products,ks-cart-easyprotect-dialog .content>.warranty{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%;max-height:100%;padding:0}ks-cart-easyprotect-dialog .content>.products>.items,ks-cart-easyprotect-dialog .content>.warranty>.items{padding:0 10px 0 10px;max-height:none}ks-cart-easyprotect-dialog ks-button{margin-top:auto}ks-cart-easyprotect-dialog .content p{margin:5px 10px 15px 10px}}@media (max-width: 420px){ks-cart-easyprotect-dialog .content h2{font-size:22px;margin:20px 10px 10px 10px}ks-cart-easyprotect-dialog .content p{font-size:15px}}";var s=t("ks_cart_easyprotect_dialog",function(){function t(t){e(this,t);this.easyprotectWarrantyChanged=r(this,"easyprotectWarrantyChanged",7);this.active=[];this.step=0}t.prototype.componentWillLoad=function(){var t=this;this.updateEligible();i.onChange("easyprotect",(function(){return t.updateEligible()}));i.onChange("insured",(function(){return t.updateEligible()}))};t.prototype.updateEligible=function(){var t=Object.keys(i.get("insured"));var e=Object.keys(i.get("easyprotect"));this.eligible=e.filter((function(e){return!t.includes(e)})).map((function(t){return i.get("products")[t]}));if(this.eligible.length==1){this.active=[this.eligible[0].id];this.step=2}};t.prototype.render=function(){var t=this;if(this.eligible.length<=0)return;var e=this.eligible.length>1&&this.step<=1?"":"hidden";var r=this.step==1?"hide":"";var a=this.eligible.length==1||this.step==2?"":"hidden";return[o("ks-button",{tall:true,name:"Dodaj gwarancję",onClick:function(){return t.show()}}),o("ks-overlay",null,o("div",{class:"content "+e+" "+r},this.products()),o("div",{class:"content "+a},this.warranty()))]};t.prototype.products=function(){var t=this;return o("div",{class:"products"},o("slot",{name:"products"}),o("div",{class:"items"},this.eligible.map((function(e){return o("ks-cart-easyprotect-product",{image:e.img,name:e.name,onClick:function(){return t.toggle(e.id)},active:t.active.includes(e.id)})}))),o("ks-button",{tall:true,name:"Przejdź dalej",onClick:function(){return t.addProducts()},disabled:this.active.length<=0}))};t.prototype.warranty=function(){var t=this;var e=Object.keys(i.get("easyprotect")).filter((function(e){return t.active.includes(e)}));return o("div",{class:"warranty"},o("slot",{name:"warranty"}),o("div",{class:"items"},e.map((function(t){return o("ks-cart-easyprotect-warranty",{"product-id":t})}))),o("ks-button",{tall:true,name:"Dodaj gwarancję",onClick:function(){return t.addWarranty()},disabled:this.active.length<=0}))};t.prototype.toggle=function(t){var e=this.active.findIndex((function(e){return e==t}));if(e!==-1)this.active.splice(e,1);else this.active.push(t);this.active=__spreadArrays(this.active)};t.prototype.show=function(){this.updateEligible();var t=this.root.querySelector("ks-overlay");t.show()};t.prototype.addProducts=function(){var t=this;this.step=1;setTimeout((function(){t.step=2}),300)};t.prototype.addWarranty=function(){var t=this;var e=this.root.querySelector("ks-overlay");e.hide();var r={};var o=this.root.querySelectorAll(".warranty .items ks-cart-easyprotect-warranty");o.forEach((function(t){r[t.getAttribute("product-id")]=t.getAttribute("active")}));this.easyprotectWarrantyChanged.emit(r);setTimeout((function(){t.step=0;t.active=[]}),300)};Object.defineProperty(t.prototype,"root",{get:function(){return a(this)},enumerable:false,configurable:true});return t}());s.style=n}}}));
import{r as t,h as e,g as a}from"./p-f66c687e.js";const o=class{constructor(e){t(this,e),this.api="",this.action="",this.passwordMessage="",this.passwordRecovery=""}componentDidLoad(){this.root.style.display="block"}render(){return[e("div",{class:"uk-padding",style:{backgroundColor:"#f2f2f5"}},e("div",{class:"uk-text-center",style:{maxWidth:"500px",margin:"auto"}},e("p",{class:"ks-text-decorated uk-text-bold",style:{fontSize:"28px"}},"POSIADASZ KONTO?"),e("form",{onSubmit:t=>this.Submit(t)},e("slot",null),e("button",{type:"submit",class:"uk-button uk-button-secondary ks-text-decorated uk-text-bold uk-width-1-1 uk-margin-bottom",style:{fontSize:"20px",padding:"6px"}},"ZALOGUJ SIĘ")),e("a",{href:this.passwordRecovery},"Nie pamiętam hasła")))]}async Submit(t){t.preventDefault();const e=this.root.querySelector("form"),a=e.querySelector("ks-input-dynamic"),o=e.querySelector("ks-input-text[password]");if(await a.Validate(),await o.Validate(),await a.IsValid()&&await o.IsValid()){var s=new Headers;s.append("pragma","no-cache"),s.append("cache-control","no-cache");const t=new FormData(e),a=await fetch(this.api,{body:t,method:"POST",headers:s,credentials:"same-origin"}).then(t=>t.text());"false"==a?o.message=this.passwordMessage:"true"==a&&this.LoginPrompt(t)}}async LoginPrompt(t){var e=new Headers;e.append("pragma","no-cache"),e.append("cache-control","no-cache");const a=new FormData;a.set("data",`email=${encodeURIComponent(t.get("email").toString())}&haslo=${encodeURIComponent(t.get("haslo").toString())}`);const o=await fetch(this.action,{body:a,method:"POST",headers:e,credentials:"same-origin"}).then(t=>t.text()),s=document.createElement("ks-order-login-prompt");-1!=o.search("koszyk.html")&&s.setAttribute("message","Do koszyka zostały dodane wcześniej zapisane produkty."),document.body.appendChild(s)}get root(){return a(this)}};export{o as ks_order_login}
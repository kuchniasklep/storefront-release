import{r as e,h as t,g as i}from"./p-f748ea6f.js";import{V as o}from"./p-802dd09c.js";const s=class{constructor(t){e(this,t),this.agreement="Wyrażam zgodę na przetwarzanie przez Sprzedawcę moich danych osobowych zawartych w formularzu w celu udzielenia odpowiedzi na zadane poprzez formularz pytania.",this.successHeading="PROPOZYCJA WYSŁANA",this.successMessage="Postaramy się odpowiedzieć jak najszybciej. Jeżeli nie odpowiemy w ciągu 2 dni roboczych prosimy o kontakt telefoniczny.",this.faliureHeading="BŁĄD WYSYŁANIA PROPOZYCJI",this.faliureMessage="Jeżeli problem się powtarza prosimy o kontakt mailowy lub telefoniczny."}async requestHandler(e){if(e.preventDefault(),!(await o(this.root.querySelector("form"))))return;this.dialog.showLoading();const t=new FormData(e.target);t.append("productUrl",document.location.href),t.append("productPrice",this.price),t.append("productOldPrice",this.oldPrice),t.append("productName",this.name),await fetch(this.api,{body:t,method:"post"}).then((async e=>{"success"==await e.text()?this.dialog.showSuccess(this.successHeading,this.successMessage):this.dialog.showFailure(this.faliureHeading,this.faliureMessage)})).catch((async e=>{let t="";window.navigator.onLine||(t="Brak internetu."),e.messsage&&(t=e.messsage),this.dialog.showFailure(this.faliureHeading,t)}))}componentDidRender(){this.dialog=this.root.querySelector("ks-dialog"),this.root.parentElement.querySelector("ks-product-negotiate > *:first-child").addEventListener("click",(()=>{this.dialog.show()}))}render(){return[t("slot",null),t("ks-dialog",null,t("form",{onSubmit:e=>this.requestHandler(e)},t("fieldset",null,t("div",{class:"info"},t("h3",null,this.heading),t("p",null,this.paragraph)),t("ks-input-text",{name:"name",required:!0,nomessage:!0,placeholder:"Imię i nazwisko",icon:"user"}),t("ks-input-text",{email:!0,name:"email",required:!0,nomessage:!0,placeholder:"E-mail",icon:"mail"}),t("ks-input-text",{url:!0,name:"url",required:!0,nomessage:!0,placeholder:"Link do konkurencyjnej oferty",icon:"link"}),t("ks-input-textarea",{rows:4,name:"comment",placeholder:"Komentarz",noresize:!0}),t("ks-input-check",{name:"zgoda",required:!0,nomessage:!0,label:this.agreement}),t("ks-button",{submit:!0,name:"WYŚLIJ ZAPYTANIE"}))))]}get root(){return i(this)}};s.style="ks-product-negotiate{display:block}ks-product-negotiate fieldset{border:none;margin:0;padding:0}ks-product-negotiate .info{text-align:center}ks-product-negotiate h3{font-family:var(--font-emphasis);font-size:20px;font-weight:700}";export{s as ks_product_negotiate}
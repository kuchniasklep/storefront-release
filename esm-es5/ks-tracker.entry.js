var __spreadArray=this&&this.__spreadArray||function(t,r){for(var n=0,e=r.length,o=t.length;n<e;n++,o++)t[o]=r[n];return t};import{r as registerInstance}from"./index-f323e182.js";import{t as tracker,r as resolve}from"./store-06ef0521.js";import"./index-6478ec90.js";var TikTokTracker=function(){function t(){this.ttq=new Promise((function(t){var r=setInterval((function(){if(ttq!==undefined){t(ttq);clearInterval(r)}}),100)}))}t.prototype.pageview=function(){this.ttq.then((function(t){t.track("Browse")}))};t.prototype.product=function(t,r,n,e){this.ttq.then((function(o){o.track("ViewContent",{content_type:"product",content_id:t,content_name:r,currency:e,price:n,quantity:1,value:n})}))};t.prototype.addToCart=function(t,r,n,e,o){this.ttq.then((function(c){c.track("AddToCart",{content_type:"product",content_id:t,content_name:r,currency:o,price:n,quantity:e,value:n*e})}))};t.prototype.order_checkout=function(t,r,n){var e=this;this.ttq.then((function(o){o.track("StartCheckout",{contents:e.transformProducts(t),currency:n,value:r})}))};t.prototype.order_form=function(t,r,n){var e=this;this.ttq.then((function(o){o.track("AddBilling",{contents:e.transformProducts(t),value:r,currency:n})}))};t.prototype.order_placed=function(t,r,n){var e=this;this.ttq.then((function(o){o.track("Checkout",{contents:e.transformProducts(t),value:r,currency:n})}))};t.prototype.search=function(t){this.ttq.then((function(r){r.track("Search",{query:t})}))};t.prototype.transformProducts=function(t){return t.map((function(t){return{content_id:t.id,content_type:"product",content_name:t.name,quantity:t.quantity,price:t.price}}))};return t}();var Tracker=function(){function t(t){registerInstance(this,t)}t.prototype.componentWillLoad=function(){var t=this;tracker.get("loaded").then((function(){if(t.tiktok)t.appendTracker(new TikTokTracker);resolve()}))};t.prototype.appendTracker=function(t){tracker.set("trackers",__spreadArray(__spreadArray([],tracker.get("trackers")),[t]))};return t}();export{Tracker as ks_tracker};